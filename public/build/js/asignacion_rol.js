!function(){const e=document.querySelector("#Rol"),n=document.querySelector("#persona_id"),o=document.querySelector("#nombre_personal");function r(){document.querySelector("#sugerencias-alumnos").innerHTML=""}function a(e,n,o,r=3e3){const a=document.querySelector(".alerta");a&&a.remove();const t=document.createElement("DIV");t.classList.add("alerta",n),t.classList.add("centrar-texto"),t.innerHTML=e,o.parentElement.insertBefore(t,o.nextElementSibling),setTimeout((()=>{t.remove()}),r)}e.addEventListener("change",(()=>{console.log("Valor seleccionado:",e.value),n.value="",r()})),n.addEventListener("input",(()=>{const t=e.value,l=n.value.trim();t?l.length<4?r():async function(e,t){try{let l="";["0","2","3","4","5","6","7","8","9","10","11","12","13","14"].includes(e)&&(l=`/api/personal-buscar?numero_control=${encodeURIComponent(t)}`);const c=await fetch(l),s=await c.json();if(!c.ok)throw new Error("Error en la petición");if(personal_Encontrado=s.personal_Detalles,console.log(personal_Encontrado,"Personal encontrado"),!personal_Encontrado||0===personal_Encontrado.length)return a("No hay coincidencias en el personal ","error",n.parentElement),void r();console.log(personal_Encontrado),function(e,a){const t=document.querySelector("#sugerencias-alumnos");t.innerHTML="",0===e.length&&r();e.forEach((e=>{const l=document.createElement("div");l.classList.add("sugerencia"),["0","2","3","4","5","6","7","8","9","10","11","12","13","14"].includes(a)&&(l.innerHTML=`\n                <div class="sugerencia-contenido">\n                    <span class="registro-id">${e.id}</span>\n                    <span class="registro-nombre">\n                        ${e.nombre}\n                        ${e.apellido_Paterno}\n                        ${e.apellido_Materno}\n                    </span>\n                </div>\n                `),l.addEventListener("click",(()=>{n.value=e.id,o.value=`${e.nombre} ${e.apellido_Paterno} ${e.apellido_Materno}`,r()})),t.appendChild(l)}))}(personal_Encontrado,e)}catch(e){console.error("Error al buscar entidad:",e),a("Error al realizar la búsqueda","error",n.parentElement)}}(t,l):a("Primero debe seleccionar un rol","error",e.parentElement)}))}();
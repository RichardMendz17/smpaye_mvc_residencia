!function(){const n=document.querySelector("#rol"),e=document.querySelector("#persona_id"),o=document.querySelector("#email"),r=document.querySelector("#password");function a(e,a){const t=document.querySelector("#sugerencias-alumnos");t.innerHTML="",0===e.length&&l(),e.forEach((e=>{const c=document.createElement("div");c.classList.add("sugerencia"),"1"===a?c.innerHTML=`\n                <div class="sugerencia-contenido">\n                    <span class="registro-id">${e.id}</span>\n                    <span class="registro-nombre">\n                        ${e.nombre_Alumno}\n                        ${e.apellido_Paterno}\n                        ${e.apellido_Materno}\n                    </span>\n                    <span class="alumno-carrera">${e.nombre_Carrera||"Sin carrera"}</span>\n                </div>\n            `:["0","2","3","4","5","6","7","8","9","10","11","12","13","14"].includes(a)&&(c.innerHTML=`\n                <div class="sugerencia-contenido">\n                    <span class="registro-id">${e.id}</span>\n                    <span class="registro-nombre">\n                        ${e.nombre}\n                        ${e.apellido_Paterno}\n                        ${e.apellido_Materno}\n                    </span>\n                </div>\n            `),c.addEventListener("click",(()=>{document.querySelector("#persona_id").value=e.id,l(),function(e){const a=n.value;["0","2","3","4","5","6","7","8","9","10","11","12","13","14"].includes(a)?(console.log("Eligio un personal"),o.value=e+"@staff.ajalpan.tecnm.mx"):["1"].includes(a)&&(console.log("Eligio un Alumno"),o.value=e+"@ajalpan.tecnm.mx");r.value=function(n=12){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%&*?";let o="";for(let r=0;r<n;r++){o+=e[Math.floor(Math.random()*e.length)]}return o}()}(e.id)})),t.appendChild(c)}))}function l(){document.querySelector("#sugerencias-alumnos").innerHTML=""}function t(n,e,o,r=3e3){const a=document.querySelector(".alerta");a&&a.remove();const l=document.createElement("DIV");l.classList.add("alerta",e),l.classList.add("centrar-texto"),l.innerHTML=n,o.parentElement.insertBefore(l,o.nextElementSibling),setTimeout((()=>{l.remove()}),r)}n.addEventListener("change",(()=>{console.log("Valor seleccionado:",n.value),e.value="",l()})),e.addEventListener("input",(()=>{const c=n.value,s=e.value.trim();if(c)return s.length<4?(l(),o.value="",void(r.value="")):void async function(n,o){try{let r="";"1"===n?r=`/api/alumnos-buscar?numero_control=${encodeURIComponent(o)}`:["0","2","3","4","5","6","7","8",,"9","10","11","12","13","14"].includes(n)&&(r=`/api/personal-buscar?numero_control=${encodeURIComponent(o)}`);const c=await fetch(r),s=await c.json();if(!c.ok)throw new Error("Error en la petición");if("1"===n){if(alumno_Encontrado=s.alumnosDetalles,!alumno_Encontrado||0===alumno_Encontrado.length)return t("No hay coincidencias en alumnos","error",e.parentElement),void l();console.log(alumno_Encontrado),a(alumno_Encontrado,n)}else if(["0","2","3","4","5","6","7","8","9","12","13","14","10","11"].includes(n)){if(personal_Encontrado=s.personal_Detalles,console.log(personal_Encontrado,"Personal encontrado"),!personal_Encontrado||0===personal_Encontrado.length)return t("No hay coincidencias en el personal ","error",e.parentElement),void l();console.log(personal_Encontrado),a(personal_Encontrado,n)}}catch(n){console.error("Error al buscar entidad:",n),t("Error al realizar la búsqueda","error",e.parentElement)}}(c,s);t("Primero debe seleccionar un rol","error",n.parentElement)}))}();